<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>賦能授權矩陣 | Canvas 互動版</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;500;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['"Noto Sans TC"', 'sans-serif'],
                    },
                    colors: {
                        brand: {
                            dark: '#0f172a',
                            primary: '#3b82f6',
                            accent: '#06b6d4',
                        }
                    }
                }
            }
        }
    </script>
    <style>
        body {
            background-color: #0f172a; /* Dark theme to make canvas pop */
            color: #e2e8f0;
            overflow-x: hidden;
        }
        .canvas-container {
            position: relative;
            width: 100%;
            height: 600px;
            background: radial-gradient(circle at center, #1e293b 0%, #0f172a 100%);
            border-bottom: 1px solid #334155;
            box-shadow: 0 10px 30px -10px rgba(0,0,0,0.5);
        }
        canvas {
            display: block;
            width: 100%;
            height: 100%;
        }
        .tooltip {
            position: absolute;
            background: rgba(15, 23, 42, 0.95);
            border: 1px solid rgba(59, 130, 246, 0.5);
            padding: 10px 15px;
            border-radius: 8px;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.2s;
            backdrop-filter: blur(4px);
            box-shadow: 0 4px 6px rgba(0,0,0,0.3);
            z-index: 10;
            max-width: 250px;
        }
        .content-section {
            background: #f8fafc;
            color: #1e293b;
        }
    </style>
</head>
<body class="antialiased">

    <!-- Navbar -->
    <nav class="fixed w-full z-50 bg-slate-900/90 backdrop-blur border-b border-slate-700">
        <div class="max-w-7xl mx-auto px-4 py-3 flex justify-between items-center">
            <div class="flex items-center space-x-3">
                <i class="fa-solid fa-layer-group text-blue-500 text-xl"></i>
                <span class="font-bold text-lg text-white">賦能授權矩陣 <span class="text-xs bg-blue-600 px-2 py-0.5 rounded text-white ml-2">Canvas Interactive</span></span>
            </div>
            <a href="#details" class="text-sm text-slate-300 hover:text-white transition">下滑查看詳情 <i class="fa-solid fa-arrow-down ml-1"></i></a>
        </div>
    </nav>

    <!-- Canvas Section -->
    <section class="pt-16 w-full">
        <div class="canvas-container" id="canvasContainer">
            <canvas id="matrixCanvas"></canvas>
            <div id="tooltip" class="tooltip">
                <h4 id="tooltipTitle" class="font-bold text-blue-400 text-sm mb-1"></h4>
                <p id="tooltipDesc" class="text-xs text-slate-300 leading-relaxed"></p>
            </div>
            
            <!-- Instructions Overlay (fades out) -->
            <div id="instruction" class="absolute bottom-4 left-1/2 transform -translate-x-1/2 text-slate-500 text-sm animate-pulse pointer-events-none">
                <i class="fa-solid fa-computer-mouse mr-2"></i> 移動滑鼠探索象限
            </div>
        </div>
    </section>

    <!-- HTML Content Flow -->
    <section id="details" class="content-section py-16">
        <div class="max-w-4xl mx-auto px-4">
            
            <!-- Intro -->
            <div class="mb-16 text-center">
                <h2 class="text-3xl font-bold text-slate-900 mb-4">為什麼需要這個矩陣？</h2>
                <p class="text-slate-600 leading-relaxed text-lg">
                    傳統的艾森豪矩陣只關注「緊急」與「重要」，忽略了領導者最核心的資產——「不可替代性」。
                    上方互動圖表透過 Canvas 技術展示了新架構：<br>
                    <span class="font-bold text-blue-600">重要性 (Y軸)</span> 與 <span class="font-bold text-blue-600">領導者參與必要性 (X軸)</span>。
                </p>
            </div>

            <!-- Steps -->
            <div class="grid md:grid-cols-2 gap-8 mb-16">
                <div class="bg-white p-6 rounded-xl shadow-sm border border-slate-200">
                    <div class="w-10 h-10 bg-blue-100 text-blue-600 rounded-full flex items-center justify-center font-bold mb-4">1</div>
                    <h3 class="font-bold text-xl mb-2">象限一：親自執行</h3>
                    <p class="text-slate-600 text-sm">高重要性 + 高參與度。這類任務涉及戰略方向、危機處理或高層關係維護，無人能代勞。</p>
                </div>
                <div class="bg-white p-6 rounded-xl shadow-sm border border-slate-200">
                    <div class="w-10 h-10 bg-green-100 text-green-600 rounded-full flex items-center justify-center font-bold mb-4">2</div>
                    <h3 class="font-bold text-xl mb-2">象限二：策略性授權</h3>
                    <p class="text-slate-600 text-sm">高重要性 + 低參與度。這是培養人才的黃金區。任務很重要，但透過授權能讓團隊成長。</p>
                </div>
                <div class="bg-white p-6 rounded-xl shadow-sm border border-slate-200">
                    <div class="w-10 h-10 bg-yellow-100 text-yellow-600 rounded-full flex items-center justify-center font-bold mb-4">3</div>
                    <h3 class="font-bold text-xl mb-2">象限三：評估與監督</h3>
                    <p class="text-slate-600 text-sm">低重要性 + 高參與度。陷阱區。看起來需要你，但產值低。應設法簡化或指導團隊接手。</p>
                </div>
                <div class="bg-white p-6 rounded-xl shadow-sm border border-slate-200">
                    <div class="w-10 h-10 bg-slate-100 text-slate-600 rounded-full flex items-center justify-center font-bold mb-4">4</div>
                    <h3 class="font-bold text-xl mb-2">象限四：授權或淘汰</h3>
                    <p class="text-slate-600 text-sm">低重要性 + 低參與度。行政雜務。應完全自動化、外包或刪除。</p>
                </div>
            </div>

            <div class="bg-slate-900 text-white rounded-2xl p-8 text-center">
                <h3 class="text-2xl font-bold mb-4">準備好提升領導力了嗎？</h3>
                <p class="text-slate-300 mb-6">開始將您的任務清單填入上方的矩陣中，釋放您的戰略時間。</p>
                <button onclick="window.scrollTo({top:0, behavior:'smooth'})" class="px-6 py-3 bg-blue-600 hover:bg-blue-500 rounded-lg font-bold transition shadow-lg shadow-blue-500/30">
                    回到 Canvas 矩陣
                </button>
            </div>
        </div>
    </section>

    <!-- Canvas Logic -->
    <script>
        const canvas = document.getElementById('matrixCanvas');
        const ctx = canvas.getContext('2d');
        const container = document.getElementById('canvasContainer');
        const tooltip = document.getElementById('tooltip');
        const tooltipTitle = document.getElementById('tooltipTitle');
        const tooltipDesc = document.getElementById('tooltipDesc');

        let width, height;
        let mouseX = -1, mouseY = -1;
        let animationFrameId;

        // Configuration
        const padding = 60;
        const axisColor = '#94a3b8';
        const fontColor = '#e2e8f0';
        
        // Data for Quadrants
        const quadrants = [
            {
                id: 'Q1',
                title: '親自執行',
                subtitle: '策略聚焦',
                desc: '高重要性，且必須由您親自處理。例如：制定戰略、危機決策。',
                color: '#3b82f6', // Blue
                x: 0, y: 0, // Logic coordinates (0,0 is top-left in logic, processed later)
                hoverColor: '#60a5fa'
            },
            {
                id: 'Q2',
                title: '策略性授權',
                subtitle: '賦能成長',
                desc: '高重要性，但可由他人代勞。這是培養團隊的最佳機會。',
                color: '#10b981', // Green
                x: 1, y: 0,
                hoverColor: '#34d399'
            },
            {
                id: 'Q3',
                title: '評估與監督',
                subtitle: '潛在參與',
                desc: '低重要性，但似乎需要您。小心陷阱！嘗試簡化流程。',
                color: '#f59e0b', // Amber
                x: 0, y: 1,
                hoverColor: '#fbbf24'
            },
            {
                id: 'Q4',
                title: '授權或淘汰',
                subtitle: '提升效率',
                desc: '低重要性且不需您參與。應自動化、委派或直接不做。',
                color: '#64748b', // Slate
                x: 1, y: 1,
                hoverColor: '#94a3b8'
            }
        ];

        // Particle System
        const particles = [];
        for(let i=0; i<30; i++) {
            particles.push({
                x: Math.random(),
                y: Math.random(),
                radius: Math.random() * 2 + 1,
                vx: (Math.random() - 0.5) * 0.001,
                vy: (Math.random() - 0.5) * 0.001,
                alpha: Math.random() * 0.5
            });
        }

        // Resize Handling
        function resize() {
            width = container.clientWidth;
            height = container.clientHeight;
            // Handle High DPI displays
            const dpr = window.devicePixelRatio || 1;
            canvas.width = width * dpr;
            canvas.height = height * dpr;
            ctx.scale(dpr, dpr);
        }

        window.addEventListener('resize', resize);
        resize();

        // Mouse Handling
        canvas.addEventListener('mousemove', (e) => {
            const rect = canvas.getBoundingClientRect();
            mouseX = e.clientX - rect.left;
            mouseY = e.clientY - rect.top;
            
            // Tooltip Logic
            const q = getHoveredQuadrant();
            if (q) {
                tooltip.style.opacity = 1;
                tooltip.style.left = (e.clientX + 15) + 'px';
                tooltip.style.top = (e.clientY + 15) + 'px';
                tooltipTitle.innerText = `Q${q.x === 0 ? (q.y === 0 ? '1' : '3') : (q.y === 0 ? '2' : '4')} : ${q.title}`;
                tooltipDesc.innerText = q.desc;
                canvas.style.cursor = 'pointer';
            } else {
                tooltip.style.opacity = 0;
                canvas.style.cursor = 'default';
            }
        });

        canvas.addEventListener('mouseleave', () => {
            mouseX = -1;
            mouseY = -1;
            tooltip.style.opacity = 0;
        });

        function getHoveredQuadrant() {
            const chartW = width - padding * 2;
            const chartH = height - padding * 2;
            const midX = padding + chartW / 2;
            const midY = padding + chartH / 2;

            // Simple logic: determine which quadrant based on mouse pos relative to mid lines
            if (mouseX < padding || mouseX > width - padding || mouseY < padding || mouseY > height - padding) return null;
            
            const col = mouseX > midX ? 1 : 0;
            const row = mouseY > midY ? 1 : 0;

            return quadrants.find(q => q.x === col && q.y === row);
        }

        // Draw Function
        function draw() {
            // Clear
            ctx.clearRect(0, 0, width, height);
            
            const chartW = width - padding * 2;
            const chartH = height - padding * 2;
            const midX = padding + chartW / 2;
            const midY = padding + chartH / 2;

            // Draw Particles (Background)
            ctx.fillStyle = 'rgba(255, 255, 255, 0.1)';
            particles.forEach(p => {
                p.x += p.vx;
                p.y += p.vy;
                if(p.x < 0) p.x = 1; if(p.x > 1) p.x = 0;
                if(p.y < 0) p.y = 1; if(p.y > 1) p.y = 0;
                
                ctx.beginPath();
                ctx.arc(p.x * width, p.y * height, p.radius, 0, Math.PI * 2);
                ctx.fillStyle = `rgba(148, 163, 184, ${p.alpha})`;
                ctx.fill();
            });

            // Draw Quadrants
            quadrants.forEach(q => {
                const qx = padding + (q.x * (chartW / 2));
                const qy = padding + (q.y * (chartH / 2));
                const qw = chartW / 2;
                const qh = chartH / 2;
                
                // Hover Check
                const isHovered = (
                    mouseX >= qx && mouseX < qx + qw &&
                    mouseY >= qy && mouseY < qy + qh
                );

                // Rect Style
                ctx.beginPath();
                // Add gap between quadrants
                const gap = 10;
                ctx.roundRect(qx + gap/2, qy + gap/2, qw - gap, qh - gap, 12);
                
                // Gradient Fill
                const gradient = ctx.createLinearGradient(qx, qy, qx + qw, qy + qh);
                if (isHovered) {
                    gradient.addColorStop(0, q.hoverColor);
                    gradient.addColorStop(1, adjustColor(q.hoverColor, -20));
                    ctx.shadowBlur = 20;
                    ctx.shadowColor = q.color;
                } else {
                    gradient.addColorStop(0, adjustColor(q.color, -30)); // Darker normally
                    gradient.addColorStop(1, adjustColor(q.color, -50));
                    ctx.shadowBlur = 0;
                }
                
                ctx.fillStyle = gradient;
                ctx.fill();
                
                // Border
                ctx.strokeStyle = isHovered ? '#fff' : 'rgba(255,255,255,0.1)';
                ctx.lineWidth = isHovered ? 2 : 1;
                ctx.stroke();

                // Text
                ctx.fillStyle = '#fff';
                ctx.textAlign = 'center';
                ctx.textBaseline = 'middle';
                
                // Title
                ctx.font = isHovered ? 'bold 24px "Noto Sans TC"' : 'bold 20px "Noto Sans TC"';
                ctx.fillText(q.title, qx + qw/2, qy + qh/2 - 15);
                
                // Subtitle
                ctx.fillStyle = 'rgba(255,255,255,0.7)';
                ctx.font = '14px "Noto Sans TC"';
                ctx.fillText(q.subtitle, qx + qw/2, qy + qh/2 + 15);

                // Reset Shadow
                ctx.shadowBlur = 0;
            });

            // Draw Axes Labels
            ctx.fillStyle = axisColor;
            ctx.font = 'bold 14px "Noto Sans TC"';
            
            // X Axis Label
            ctx.textAlign = 'center';
            ctx.fillText("領導者參與必要性 (低 → 高)", midX, height - 15);
            // Draw arrows for axis
            drawArrow(ctx, padding, height - 40, width - padding, height - 40);

            // Y Axis Label
            ctx.save();
            ctx.translate(20, midY);
            ctx.rotate(-Math.PI / 2);
            ctx.textAlign = 'center';
            ctx.fillText("重要性 (低 → 高)", 0, 0);
            ctx.restore();
            // Draw arrows for axis Y
            drawArrow(ctx, 40, height - padding, 40, padding);

            requestAnimationFrame(draw);
        }

        // Utility to darken/lighten color (simple hex manipulation)
        function adjustColor(color, amount) {
            return color; // Simplified for demo, ideally uses proper color manipulation
        }
        
        // Arrow Helper
        function drawArrow(ctx, fromx, fromy, tox, toy) {
            const headlen = 10; 
            const dx = tox - fromx;
            const dy = toy - fromy;
            const angle = Math.atan2(dy, dx);
            
            ctx.beginPath();
            ctx.strokeStyle = '#475569';
            ctx.lineWidth = 2;
            ctx.moveTo(fromx, fromy);
            ctx.lineTo(tox, toy);
            ctx.stroke();
            
            ctx.beginPath();
            ctx.fillStyle = '#475569';
            ctx.moveTo(tox, toy);
            ctx.lineTo(tox - headlen * Math.cos(angle - Math.PI / 6), toy - headlen * Math.sin(angle - Math.PI / 6));
            ctx.lineTo(tox - headlen * Math.cos(angle + Math.PI / 6), toy - headlen * Math.sin(angle + Math.PI / 6));
            ctx.fill();
        }

        // Start Loop
        draw();

    </script>
</body>
</html>
